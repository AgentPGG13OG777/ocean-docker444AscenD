version: 2
jobs:
  build:
    docker:
      - image: docker:git
    steps:
      - checkout
      - setup_remote_docker
      - run:
          name: Build application Docker image
          command: |
            docker build \
              --build-arg PYTHON_VERSION=3.9 \
              --build-arg OCEAN_VERSION=5.3.0 \
              -f 5/python3.9/slim/Dockerfile . \
              -t ocean:5-python3.9-slim
      - run:
          name: Run tests
          command: |
            docker run -it --rm ocean:5-python3.9-slim dwave --platform
